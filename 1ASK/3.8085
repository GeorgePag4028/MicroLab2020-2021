LXI B,01F4H ; DELAY OF 0,5SEC  B=500
MVI E,01H ; E IS THE POSITION OF THE TRAIN
MOV A,E
CALL DELB 
CMA
STA 3000H ; SHOW THE FIRST POSITION

; START WITH THE LEFT ROTATION BECAUSE WE ARE ON THE 01 LSB OF THE
; BOARD
ROTATE_LEFT:
	LDA 2000H ; CHECK IF THE MSB IS ON ,SO YOU STAY THERE , 
					;ELSE MOVE ON
	ANI 80H
	CPI 80H
	JNZ ROTATE_LEFT
	
	LDA 2000H ; CHECK IF WE HAVE PRESS THE BUTTON ON NO 
				;WHEN WE ARE AT 1 LSB THEN YOU MOVE AT THE CORRECT DIRECTION
				;ELSE WE MOVE IN THE INVERSE ONE 
	ANI 01H
	JZ ROTATE_RIGHT_INVERSE

	MOV A,E ; IF WE HAVE REACH THE END ON THE LEFT ONE WHEN WE HIT 
				;THE BUTTON TO CHANGE FROM THE INVERSE TO NORMAL WE GO 
				;TO THE ROTATE_RIGHT  
	CPI 80H
	CALL DELB
	JZ ROTATE_RIGHT
	
	MOV A,E ; 
	RLC ; ROTATE LEFT THE TRAIN
	MOV E,A
	CMA
	STA 3000H ; DISPLAY THE TRAIN
	CMA
	CALL DELB
	CPI 80H ; WHILE WE DONT HAVE REACH THE END ON THE ROTATE_LEFT 
				;WE KEEP GOING ELSE WE MOVE TO ROTATE_RIGHT

	JNZ ROTATE_LEFT
	CALL DELB
	JZ ROTATE_RIGHT

ROTATE_RIGHT:
	LDA 2000H
	ANI 80H
	JZ ROTATE_RIGHT
	
	LDA 2000H
	ANI 01H
	JZ ROTATE_LEFT_INVERSE
	
	MOV A,E
	CPI 01H ; CHECK IF WE HAVE PRESSED THE LSB ON THE 01H POSITION
				; AND WE HAVE TO MOVE LEFT
	CALL DELB
	JZ ROTATE_LEFT
		
	
	MOV A,E
	RRC ; ROTARE RIGHT THE POSITION OF THE TRAIN
	MOV E,A
	CMA
	STA 3000H ; DISPLAY IT
	CMA
	CALL DELB
	CPI 01H
	JNZ ROTATE_RIGHT ; WHILE THE HAVENT REACH THE LSB OF THE DISPLAY
							; KEEP GOING , ELSE GO TO LEFT
	CALL DELB
	JZ ROTATE_LEFT


	

	
ROTATE_RIGHT_INVERSE:
	LDA 2000H
	ANI 80H
	JZ ROTATE_RIGHT_INVERSE
	
	LDA 2000H
	ANI 01H ; CHECK IF THE LSB BUTTON IS UNPUSHED SO WE HAVE TO GO 
				; TO THE NORMAL ROTATION ONCE AGAIN
	JNZ ROTATE_LEFT
	
	MOV A,E
	CPI 01H
	CALL DELB
	JZ ROTATE_LEFT_INVERSE
	
	MOV A,E
	RRC
	MOV E,A
	CMA
	STA 3000H
	CMA
	CALL DELB
	CPI 01H
	JNZ ROTATE_RIGHT_INVERSE
	CALL DELB
	JZ ROTATE_LEFT_INVERSE
	
ROTATE_LEFT_INVERSE:
	LDA 2000H
	ANI 80H
	JZ ROTATE_LEFT_INVERSE
	
	LDA 2000H
	ANI 01H
	JNZ ROTATE_RIGHT

	MOV A,E
	CPI 80H
	CALL DELB
	JZ ROTATE_RIGHT_INVERSE
	
	MOV A,E
	RLC
	MOV E,A
	CMA 
	STA 3000H
	CMA
	CALL DELB
	CPI 80H
	JNZ ROTATE_LEFT_INVERSE
	CALL DELB
	JZ ROTATE_RIGHT_INVERSE
END
	
	
